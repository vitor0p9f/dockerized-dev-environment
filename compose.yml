services:
  dockerized-dev-environment:
    build:
      context: .
      args:
        - USER_ID=${USER_ID}
        - USER_NAME=${USER_NAME}
    container_name: dockerized-dev-environment
    image: dockerized-dev-environment-image
    tty: true
    stdin_open: true
    command: fish
    user: ${USER_NAME}
    env_file:
      - .env
    volumes:
      - nix:/nix
      - ssh:/home/${USER_NAME}/.ssh
      - local:/home/${USER_NAME}/.local

      - type: bind
        source: ./config/
        target: /home/${USER_NAME}/.config/

      - type: bind
        source: /home/${USER_NAME}/Documents/Programming/
        target: /home/${USER_NAME}/workdir/

      - type: bind
        source: ./config/tmux/.tmux.conf
        target: /home/${USER_NAME}/.tmux.conf

volumes:
  nix:
    name: dockerized-dev-environment-nix
  ssh:
    name: dockerized-dev-environment-ssh
  local:
    name: dockerized-dev-environment-local
